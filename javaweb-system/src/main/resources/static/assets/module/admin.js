/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/admin.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/admin.js":
/*!**********************!*\
  !*** ./src/admin.js ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("__webpack_require__(/*! ./js/admin.js */ \"./src/js/admin.js\");\n\n//# sourceURL=webpack:///./src/admin.js?");

/***/ }),

/***/ "./src/js/admin.js":
/*!*************************!*\
  !*** ./src/js/admin.js ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/** EasyWeb iframe v3.1.8 date:2020-05-04 License By http://easyweb.vip */\r\n\r\nlayui.define(['layer'], function (exports) {\r\n    var $ = layui.jquery;\r\n    var layer = layui.layer;\r\n    var setter = layui.cache;\r\n    var bodyDOM = '.layui-layout-admin>.layui-body';\r\n    var tabDOM = bodyDOM + '>.layui-tab';\r\n    var sideDOM = '.layui-layout-admin>.layui-side>.layui-side-scroll';\r\n    var headerDOM = '.layui-layout-admin>.layui-header';\r\n    var navFilter = 'admin-side-nav';\r\n    var admin = {version: '3.1.8', layerData: {}};\r\n\r\n    /** 设置侧栏折叠 */\r\n    admin.flexible = function (expand) {\r\n        if (window !== top && !admin.isTop() && top.layui && top.layui.admin) return top.layui.admin.flexible(expand);\r\n        var $layout = $('.layui-layout-admin');\r\n        var isExapnd = $layout.hasClass('admin-nav-mini');\r\n        if (expand === undefined) expand = isExapnd;\r\n        if (isExapnd === expand) {\r\n            if (window.sideFlexTimer) clearTimeout(window.sideFlexTimer);\r\n            $layout.addClass('admin-side-flexible');\r\n            window.sideFlexTimer = setTimeout(function () {\r\n                $layout.removeClass('admin-side-flexible');\r\n            }, 600);\r\n            if (expand) {\r\n                admin.hideTableScrollBar();\r\n                $layout.removeClass('admin-nav-mini');\r\n            } else {\r\n                $layout.addClass('admin-nav-mini');\r\n            }\r\n            layui.event.call(this, 'admin', 'flexible({*})', {expand: expand});\r\n        }\r\n    };\r\n\r\n    /** 设置导航栏选中 */\r\n    admin.activeNav = function (url) {\r\n        if (window !== top && !admin.isTop() && top.layui && top.layui.admin) return top.layui.admin.activeNav(url);\r\n        if (!url) return console.warn('active url is null');\r\n        $(sideDOM + '>.layui-nav .layui-nav-item .layui-nav-child dd.layui-this').removeClass('layui-this');\r\n        $(sideDOM + '>.layui-nav .layui-nav-item.layui-this').removeClass('layui-this');\r\n        var $a = $(sideDOM + '>.layui-nav a[lay-href=\"' + url + '\"]');\r\n        if ($a.length === 0) return console.warn(url + ' not found');\r\n        var isMini = $('.layui-layout-admin').hasClass('admin-nav-mini');\r\n        if ($(sideDOM + '>.layui-nav').attr('lay-shrink') === '_all') {  // 手风琴效果\r\n            var $pChilds = $a.parent('dd').parents('.layui-nav-child');\r\n            if (!isMini) {\r\n                $(sideDOM + '>.layui-nav .layui-nav-itemed>.layui-nav-child').not($pChilds)\r\n                    .css('display', 'block').slideUp('fast', function () {\r\n                    $(this).css('display', '');\r\n                });\r\n            }\r\n            $(sideDOM + '>.layui-nav .layui-nav-itemed').not($pChilds.parent()).removeClass('layui-nav-itemed');\r\n        }\r\n        $a.parent().addClass('layui-this');  // 选中当前\r\n        // 展开所有父级\r\n        var $asParents = $a.parent('dd').parents('.layui-nav-child').parent();\r\n        if (!isMini) {\r\n            var $childs = $asParents.not('.layui-nav-itemed').children('.layui-nav-child');\r\n            $childs.slideDown('fast', function () {\r\n                if ($(this).is($childs.last())) {\r\n                    $childs.css('display', '');\r\n                    // 菜单超出屏幕自动滚动\r\n                    var topBeyond = $a.offset().top + $a.outerHeight() + 30 - admin.getPageHeight();\r\n                    var topDisparity = 50 + 65 - $a.offset().top;\r\n                    if (topBeyond > 0) {\r\n                        $(sideDOM).animate({'scrollTop': $(sideDOM).scrollTop() + topBeyond}, 300);\r\n                    } else if (topDisparity > 0) {\r\n                        $(sideDOM).animate({'scrollTop': $(sideDOM).scrollTop() - topDisparity}, 300);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        $asParents.addClass('layui-nav-itemed');\r\n        // 适配多系统模式\r\n        $('ul[lay-filter=\"' + navFilter + '\"]').addClass('layui-hide');\r\n        var $aUl = $a.parents('.layui-nav');\r\n        $aUl.removeClass('layui-hide');\r\n        $(headerDOM + '>.layui-nav>.layui-nav-item').removeClass('layui-this');\r\n        $(headerDOM + '>.layui-nav>.layui-nav-item>a[nav-bind=\"' + $aUl.attr('nav-id') + '\"]').parent().addClass('layui-this');\r\n    };\r\n\r\n    /** 右侧弹出 */\r\n    admin.popupRight = function (param) {\r\n        param.anim = -1;\r\n        param.offset = 'r';\r\n        param.move = false;\r\n        param.fixed = true;\r\n        if (param.area === undefined) param.area = '336px';\r\n        if (param.title === undefined) param.title = false;\r\n        if (param.closeBtn === undefined) param.closeBtn = false;\r\n        if (param.shadeClose === undefined) param.shadeClose = true;\r\n        if (param.skin === undefined) param.skin = 'layui-anim layui-anim-rl layui-layer-adminRight';\r\n        return admin.open(param);\r\n    };\r\n\r\n    /** 封装layer.open */\r\n    admin.open = function (param) {\r\n        if (param.content && param.type === 2) param.url = undefined;  // 参数纠正\r\n        if (param.url && (param.type === 2 || param.type === undefined)) param.type = 1;  // 参数纠正\r\n        if (param.area === undefined) param.area = param.type === 2 ? ['360px', '300px'] : '360px';\r\n        if (param.offset === undefined) param.offset = '70px';\r\n        if (param.shade === undefined) param.shade = .1;\r\n        if (param.fixed === undefined) param.fixed = false;\r\n        if (param.resize === undefined) param.resize = false;\r\n        if (param.skin === undefined) param.skin = 'layui-layer-admin';\r\n        var eCallBack = param.end;\r\n        param.end = function () {\r\n            layer.closeAll('tips');  // 关闭表单验证的tips\r\n            eCallBack && eCallBack();\r\n        };\r\n        if (param.url) {\r\n            var sCallBack = param.success;\r\n            param.success = function (layero, index) {\r\n                $(layero).data('tpl', param.tpl || '');\r\n                admin.reloadLayer(index, param.url, sCallBack);\r\n            };\r\n        } else if (param.tpl && param.content) {\r\n            param.content = admin.util.tpl(param.content, param.data, setter.tplOpen, setter.tplClose);\r\n        }\r\n        var layIndex = layer.open(param);\r\n        if (param.data) admin.layerData['d' + layIndex] = param.data;\r\n        return layIndex;\r\n    };\r\n\r\n    /** 获取弹窗数据 */\r\n    admin.getLayerData = function (index, key) {\r\n        if (index === undefined) {\r\n            index = parent.layer.getFrameIndex(window.name);\r\n            if (index === undefined) return null;\r\n            else return parent.layui.admin.getLayerData(parseInt(index), key);\r\n        } else if (isNaN(index)) {\r\n            index = admin.getLayerIndex(index);\r\n        }\r\n        if (index === undefined) return;\r\n        var layerData = admin.layerData['d' + index];\r\n        if (key && layerData) return layerData[key];\r\n        return layerData;\r\n    };\r\n\r\n    /** 放入弹窗数据 */\r\n    admin.putLayerData = function (key, value, index) {\r\n        if (index === undefined) {\r\n            index = parent.layer.getFrameIndex(window.name);\r\n            if (index === undefined) return;\r\n            else return parent.layui.admin.putLayerData(key, value, parseInt(index));\r\n        } else if (isNaN(index)) {\r\n            index = admin.getLayerIndex(index);\r\n        }\r\n        if (index === undefined) return;\r\n        var layerData = admin.getLayerData(index);\r\n        if (!layerData) layerData = {};\r\n        layerData[key] = value;\r\n        admin.layerData['d' + index] = layerData;\r\n    };\r\n\r\n    /** 刷新url方式的layer */\r\n    admin.reloadLayer = function (index, url, success) {\r\n        if (typeof url === 'function') {\r\n            success = url;\r\n            url = undefined;\r\n        }\r\n        if (isNaN(index)) index = admin.getLayerIndex(index);\r\n        if (index === undefined) return;\r\n        var $layero = $('#layui-layer' + index);\r\n        if (url === undefined) url = $layero.data('url');\r\n        if (!url) return;\r\n        $layero.data('url', url);\r\n        admin.showLoading($layero);\r\n        admin.ajax({\r\n            url: url,\r\n            dataType: 'html',\r\n            success: function (res) {\r\n                admin.removeLoading($layero, false);\r\n                if (typeof res !== 'string') res = JSON.stringify(res);\r\n                var tpl = $layero.data('tpl');\r\n                // 模板解析\r\n                if (tpl === true || tpl === 'true') {\r\n                    var data = admin.getLayerData(index) || {};\r\n                    data.layerIndex = index;\r\n                    // 模板里面有动态模板处理\r\n                    var $html = $('<div>' + res + '</div>'), tplAll = {};\r\n                    $html.find('script,[tpl-ignore]').each(function (i) {\r\n                        var $this = $(this);\r\n                        tplAll['temp_' + i] = $this[0].outerHTML;\r\n                        $this.after('${temp_' + i + '}').remove();\r\n                    });\r\n                    res = admin.util.tpl($html.html(), data, setter.tplOpen, setter.tplClose);\r\n                    for (var f in tplAll) res = res.replace('${' + f + '}', tplAll[f]);\r\n                }\r\n                $layero.children('.layui-layer-content').html(res);\r\n                admin.renderTpl('#layui-layer' + index + ' [ew-tpl]');\r\n                success && success($layero[0], index);\r\n            }\r\n        });\r\n    };\r\n\r\n    /** 封装layer.alert */\r\n    admin.alert = function (content, options, yes) {\r\n        if (typeof options === 'function') {\r\n            yes = options;\r\n            options = {};\r\n        }\r\n        if (options.skin === undefined) options.skin = 'layui-layer-admin';\r\n        if (options.shade === undefined) options.shade = .1;\r\n        return layer.alert(content, options, yes);\r\n    };\r\n\r\n    /** 封装layer.confirm */\r\n    admin.confirm = function (content, options, yes, cancel) {\r\n        if (typeof options === 'function') {\r\n            cancel = yes;\r\n            yes = options;\r\n            options = {};\r\n        }\r\n        if (options.skin === undefined) options.skin = 'layui-layer-admin';\r\n        if (options.shade === undefined) options.shade = .1;\r\n        return layer.confirm(content, options, yes, cancel);\r\n    };\r\n\r\n    /** 封装layer.prompt */\r\n    admin.prompt = function (options, yes) {\r\n        if (typeof options === 'function') {\r\n            yes = options;\r\n            options = {};\r\n        }\r\n        if (options.skin === undefined) options.skin = 'layui-layer-admin layui-layer-prompt';\r\n        if (options.shade === undefined) options.shade = .1;\r\n        return layer.prompt(options, yes);\r\n    };\r\n\r\n    /** 封装ajax请求，返回数据类型为json */\r\n    admin.req = function (url, data, success, method, option) {\r\n        if (typeof data === 'function') {\r\n            option = method;\r\n            method = success;\r\n            success = data;\r\n            data = {};\r\n        }\r\n        if (method !== undefined && typeof method !== 'string') {\r\n            option = method;\r\n            method = undefined;\r\n        }\r\n        if (!method) method = 'GET';\r\n        if (typeof data === 'string') {\r\n            if (!option) option = {};\r\n            if (!option.contentType) option.contentType = 'application/json;charset=UTF-8';\r\n        } else if (setter.reqPutToPost) {\r\n            if ('put' === method.toLowerCase()) {\r\n                method = 'POST';\r\n                data._method = 'PUT';\r\n            } else if ('delete' === method.toLowerCase()) {\r\n                method = 'GET';\r\n                data._method = 'DELETE';\r\n            }\r\n        }\r\n        return admin.ajax($.extend({\r\n            url: (setter.baseServer || '') + url, data: data, type: method, dataType: 'json', success: success\r\n        }, option));\r\n    };\r\n\r\n    /** 封装ajax请求 */\r\n    admin.ajax = function (param) {\r\n        var oldParam = admin.util.deepClone(param);\r\n        if (!param.dataType) param.dataType = 'json';\r\n        if (!param.headers) param.headers = {};\r\n        // 统一设置header\r\n        var headers = setter.getAjaxHeaders(param.url);\r\n        if (headers) {\r\n            for (var i = 0; i < headers.length; i++) {\r\n                if (param.headers[headers[i].name] === undefined) param.headers[headers[i].name] = headers[i].value;\r\n            }\r\n        }\r\n        // success预处理\r\n        var success = param.success;\r\n        param.success = function (result, status, xhr) {\r\n            var before = setter.ajaxSuccessBefore(admin.parseJSON(result), param.url, {\r\n                param: oldParam, reload: function (p) {\r\n                    admin.ajax($.extend(true, oldParam, p));\r\n                }, update: function (r) {\r\n                    result = r;\r\n                }, xhr: xhr\r\n            });\r\n            if (before !== false) success && success(result, status, xhr);\r\n            else param.cancel && param.cancel();\r\n        };\r\n        param.error = function (xhr, status) {\r\n            param.success({code: xhr.status, msg: xhr.statusText}, status, xhr);\r\n        };\r\n        // 解决缓存问题\r\n        if (layui.cache.version && (!setter.apiNoCache || param.dataType.toLowerCase() !== 'json')) {\r\n            if (param.url.indexOf('?') === -1) param.url += '?v=';\r\n            else param.url += '&v=';\r\n            if (layui.cache.version === true) param.url += new Date().getTime();\r\n            else param.url += layui.cache.version;\r\n        }\r\n        return $.ajax(param);\r\n    };\r\n\r\n    /** 解析json */\r\n    admin.parseJSON = function (str) {\r\n        if (typeof str === 'string') {\r\n            try {\r\n                return JSON.parse(str);\r\n            } catch (e) {\r\n            }\r\n        }\r\n        return str;\r\n    };\r\n\r\n    /** 显示加载动画 */\r\n    admin.showLoading = function (elem, type, opacity, size) {\r\n        if (elem !== undefined && (typeof elem !== 'string') && !(elem instanceof $)) {\r\n            type = elem.type;\r\n            opacity = elem.opacity;\r\n            size = elem.size;\r\n            elem = elem.elem;\r\n        }\r\n        if (type === undefined) type = setter.defaultLoading || 1;\r\n        if (size === undefined) size = 'sm';\r\n        if (elem === undefined) elem = 'body';\r\n        var loader = [\r\n            '<div class=\"ball-loader ' + size + '\"><span></span><span></span><span></span><span></span></div>',\r\n            '<div class=\"rubik-loader ' + size + '\"></div>',\r\n            '<div class=\"signal-loader ' + size + '\"><span></span><span></span><span></span><span></span></div>',\r\n            '<div class=\"layui-loader ' + size + '\"><i class=\"layui-icon layui-icon-loading layui-anim layui-anim-rotate layui-anim-loop\"></i></div>'\r\n        ];\r\n        $(elem).addClass('page-no-scroll');  // 禁用滚动条\r\n        $(elem).scrollTop(0);\r\n        var $loading = $(elem).children('.page-loading');\r\n        if ($loading.length <= 0) {\r\n            $(elem).append('<div class=\"page-loading\">' + loader[type - 1] + '</div>');\r\n            $loading = $(elem).children('.page-loading');\r\n        }\r\n        if (opacity !== undefined) $loading.css('background-color', 'rgba(255,255,255,' + opacity + ')');\r\n        $loading.show();\r\n    };\r\n\r\n    /** 移除加载动画 */\r\n    admin.removeLoading = function (elem, fade, del) {\r\n        if (elem === undefined) elem = 'body';\r\n        if (fade === undefined) fade = true;\r\n        var $loading = $(elem).children('.page-loading');\r\n        if (del) $loading.remove();\r\n        else if (fade) $loading.fadeOut('fast');\r\n        else $loading.hide();\r\n        $(elem).removeClass('page-no-scroll');\r\n    };\r\n\r\n    /** 缓存临时数据 */\r\n    admin.putTempData = function (key, value, local) {\r\n        var tableName = local ? setter.tableName : setter.tableName + '_tempData';\r\n        if (value === undefined || value === null) {\r\n            if (local) layui.data(tableName, {key: key, remove: true});\r\n            else layui.sessionData(tableName, {key: key, remove: true});\r\n        } else {\r\n            if (local) layui.data(tableName, {key: key, value: value});\r\n            else layui.sessionData(tableName, {key: key, value: value});\r\n        }\r\n    };\r\n\r\n    /** 获取缓存临时数据 */\r\n    admin.getTempData = function (key, local) {\r\n        if (typeof key === 'boolean') {\r\n            local = key;\r\n            key = undefined;\r\n        }\r\n        var tableName = local ? setter.tableName : setter.tableName + '_tempData';\r\n        var tempData = local ? layui.data(tableName) : layui.sessionData(tableName);\r\n        if (!key) return tempData;\r\n        return tempData ? tempData[key] : undefined;\r\n    };\r\n\r\n    /** 滑动选项卡 */\r\n    admin.rollPage = function (d) {\r\n        if (window !== top && !admin.isTop() && top.layui && top.layui.admin) return top.layui.admin.rollPage(d);\r\n        var $tabTitle = $(tabDOM + '>.layui-tab-title');\r\n        var left = $tabTitle.scrollLeft();\r\n        if ('left' === d) {\r\n            $tabTitle.animate({'scrollLeft': left - 120}, 100);\r\n        } else if ('auto' === d) {\r\n            var autoLeft = 0;\r\n            $tabTitle.children(\"li\").each(function () {\r\n                if ($(this).hasClass('layui-this')) return false;\r\n                else autoLeft += $(this).outerWidth();\r\n            });\r\n            $tabTitle.animate({'scrollLeft': autoLeft - 120}, 100);\r\n        } else {\r\n            $tabTitle.animate({'scrollLeft': left + 120}, 100);\r\n        }\r\n    };\r\n\r\n    /** 刷新当前选项卡 */\r\n    admin.refresh = function (url, isIndex) {\r\n        if (window !== top && !admin.isTop() && top.layui && top.layui.admin) return top.layui.admin.refresh(url);\r\n        var $iframe;\r\n        if (!url) {\r\n            $iframe = $(tabDOM + '>.layui-tab-content>.layui-tab-item.layui-show>.admin-iframe');\r\n            if (!$iframe || $iframe.length <= 0) $iframe = $(bodyDOM + '>div>.admin-iframe');\r\n        } else {\r\n            $iframe = $(tabDOM + '>.layui-tab-content>.layui-tab-item>.admin-iframe[lay-id=\"' + url + '\"]');\r\n            if (!$iframe || $iframe.length <= 0) $iframe = $(bodyDOM + '>.admin-iframe');\r\n        }\r\n        if (!$iframe || !$iframe[0]) return console.warn(url + ' is not found');\r\n        try {\r\n            if (isIndex && $iframe[0].contentWindow.refreshTab) {\r\n                $iframe[0].contentWindow.refreshTab();\r\n            } else {\r\n                admin.showLoading({elem: $iframe.parent(), size: ''});\r\n                $iframe[0].contentWindow.location.reload();\r\n            }\r\n        } catch (e) {\r\n            console.warn(e);\r\n            $iframe.attr('src', $iframe.attr('src'));\r\n        }\r\n    };\r\n\r\n    /** 关闭当前选项卡 */\r\n    admin.closeThisTabs = function (url) {\r\n        if (window !== top && !admin.isTop() && top.layui && top.layui.admin) return top.layui.admin.closeThisTabs(url);\r\n        admin.closeTabOperNav();\r\n        var $title = $(tabDOM + '>.layui-tab-title');\r\n        if (!url) {\r\n            if ($title.find('li').first().hasClass('layui-this')) return layer.msg('主页不能关闭', {icon: 2});\r\n            $title.find('li.layui-this').find('.layui-tab-close').trigger('click');\r\n        } else {\r\n            if (url === $title.find('li').first().attr('lay-id')) return layer.msg('主页不能关闭', {icon: 2});\r\n            $title.find('li[lay-id=\"' + url + '\"]').find('.layui-tab-close').trigger('click');\r\n        }\r\n    };\r\n\r\n    /** 关闭其他选项卡 */\r\n    admin.closeOtherTabs = function (url) {\r\n        if (window !== top && !admin.isTop() && top.layui && top.layui.admin) return top.layui.admin.closeOtherTabs(url);\r\n        if (!url) {\r\n            $(tabDOM + '>.layui-tab-title li:gt(0):not(.layui-this)').find('.layui-tab-close').trigger('click');\r\n        } else {\r\n            $(tabDOM + '>.layui-tab-title li:gt(0)').each(function () {\r\n                if (url !== $(this).attr('lay-id')) $(this).find('.layui-tab-close').trigger('click');\r\n            });\r\n        }\r\n        admin.closeTabOperNav();\r\n    };\r\n\r\n    /** 关闭所有选项卡 */\r\n    admin.closeAllTabs = function () {\r\n        if (window !== top && !admin.isTop() && top.layui && top.layui.admin) return top.layui.admin.closeAllTabs();\r\n        $(tabDOM + '>.layui-tab-title li:gt(0)').find('.layui-tab-close').trigger('click');\r\n        $(tabDOM + '>.layui-tab-title li:eq(0)').trigger('click');\r\n        admin.closeTabOperNav();\r\n    };\r\n\r\n    /** 关闭选项卡操作菜单 */\r\n    admin.closeTabOperNav = function () {\r\n        if (window !== top && !admin.isTop() && top.layui && top.layui.admin) return top.layui.admin.closeTabOperNav();\r\n        $('.layui-icon-down .layui-nav .layui-nav-child').removeClass('layui-show');\r\n    };\r\n\r\n    /** 设置主题 */\r\n    admin.changeTheme = function (theme, win, noCache, noChild) {\r\n        if (!noCache) admin.putSetting('defaultTheme', theme);\r\n        if (!win) win = top;\r\n        admin.removeTheme(win);\r\n        if (theme) {\r\n            try {\r\n                var $body = win.layui.jquery('body');\r\n                $body.addClass(theme);\r\n                $body.data('theme', theme);\r\n            } catch (e) {\r\n            }\r\n        }\r\n        if (noChild) return;\r\n        var ifs = win.frames;\r\n        for (var i = 0; i < ifs.length; i++) admin.changeTheme(theme, ifs[i], true, false);\r\n    };\r\n\r\n    /** 移除主题 */\r\n    admin.removeTheme = function (w) {\r\n        if (!w) w = window;\r\n        try {\r\n            var $body = w.layui.jquery('body');\r\n            var theme = $body.data('theme');\r\n            if (theme) $body.removeClass(theme);\r\n            $body.removeData('theme');\r\n        } catch (e) {\r\n        }\r\n    };\r\n\r\n    /** 关闭当前iframe层弹窗 */\r\n    admin.closeThisDialog = function () {\r\n        return admin.closeDialog();\r\n    };\r\n\r\n    /** 关闭elem所在的页面层弹窗 */\r\n    admin.closeDialog = function (elem) {\r\n        if (elem) layer.close(admin.getLayerIndex(elem));\r\n        else parent.layer.close(parent.layer.getFrameIndex(window.name));\r\n    };\r\n\r\n    /** 获取页面层弹窗的index */\r\n    admin.getLayerIndex = function (elem) {\r\n        if (!elem) return parent.layer.getFrameIndex(window.name);\r\n        var id = $(elem).parents('.layui-layer').first().attr('id');\r\n        if (id && id.length >= 11) return id.substring(11);\r\n    };\r\n\r\n    /** 让当前的iframe弹层自适应高度 */\r\n    admin.iframeAuto = function () {\r\n        return parent.layer.iframeAuto(parent.layer.getFrameIndex(window.name));\r\n    };\r\n\r\n    /** 获取浏览器高度 */\r\n    admin.getPageHeight = function () {\r\n        return document.documentElement.clientHeight || document.body.clientHeight;\r\n    };\r\n\r\n    /** 获取浏览器宽度 */\r\n    admin.getPageWidth = function () {\r\n        return document.documentElement.clientWidth || document.body.clientWidth;\r\n    };\r\n\r\n    /** 绑定表单弹窗 */\r\n    admin.modelForm = function (layero, btnFilter, formFilter) {\r\n        var $layero = $(layero);\r\n        $layero.addClass('layui-form');\r\n        if (formFilter) $layero.attr('lay-filter', formFilter);\r\n        // 确定按钮绑定submit\r\n        var $btnSubmit = $layero.find('.layui-layer-btn .layui-layer-btn0');\r\n        $btnSubmit.attr('lay-submit', '');\r\n        $btnSubmit.attr('lay-filter', btnFilter);\r\n    };\r\n\r\n    /** loading按钮 */\r\n    admin.btnLoading = function (elem, text, loading) {\r\n        if (text !== undefined && (typeof text === 'boolean')) {\r\n            loading = text;\r\n            text = undefined;\r\n        }\r\n        if (text === undefined) text = '&nbsp;加载中';\r\n        if (loading === undefined) loading = true;\r\n        var $elem = $(elem);\r\n        if (loading) {\r\n            $elem.addClass('ew-btn-loading');\r\n            $elem.prepend('<span class=\"ew-btn-loading-text\"><i class=\"layui-icon layui-icon-loading layui-anim layui-anim-rotate layui-anim-loop\"></i>' + text + '</span>');\r\n            $elem.attr('disabled', 'disabled').prop('disabled', true);\r\n        } else {\r\n            $elem.removeClass('ew-btn-loading');\r\n            $elem.children('.ew-btn-loading-text').remove();\r\n            $elem.removeProp('disabled').removeAttr('disabled');\r\n        }\r\n    };\r\n\r\n    /** 鼠标移入侧边栏自动展开 */\r\n    admin.openSideAutoExpand = function () {\r\n        var $side = $('.layui-layout-admin>.layui-side');\r\n        $side.off('mouseenter.openSideAutoExpand').on(\"mouseenter.openSideAutoExpand\", function () {\r\n            if (!$(this).parent().hasClass('admin-nav-mini')) return;\r\n            admin.flexible(true);\r\n            $(this).addClass('side-mini-hover');\r\n        });\r\n        $side.off('mouseleave.openSideAutoExpand').on(\"mouseleave.openSideAutoExpand\", function () {\r\n            if (!$(this).hasClass('side-mini-hover')) return;\r\n            admin.flexible(false);\r\n            $(this).removeClass('side-mini-hover');\r\n        });\r\n    };\r\n\r\n    /** 表格单元格超出内容自动展开 */\r\n    admin.openCellAutoExpand = function () {\r\n        var $body = $('body');\r\n        $body.off('mouseenter.openCellAutoExpand').on('mouseenter.openCellAutoExpand', '.layui-table-view td', function () {\r\n            $(this).find('.layui-table-grid-down').trigger('click');\r\n        });\r\n        $body.off('mouseleave.openCellAutoExpand').on('mouseleave.openCellAutoExpand', '.layui-table-tips>.layui-layer-content', function () {\r\n            $('.layui-table-tips-c').trigger('click');\r\n        });\r\n    };\r\n\r\n    /** open事件解析layer参数 */\r\n    admin.parseLayerOption = function (option) {\r\n        // 数组类型进行转换\r\n        for (var f in option) {\r\n            if (!option.hasOwnProperty(f)) continue;\r\n            if (option[f] && option[f].toString().indexOf(',') !== -1) option[f] = option[f].toString().split(',');\r\n        }\r\n        // function类型参数转换\r\n        var fs = {'success': 'layero,index', 'cancel': 'index,layero', 'end': '', 'full': '', 'min': '', 'restore': ''};\r\n        for (var k in fs) {\r\n            if (!fs.hasOwnProperty(k) || !option[k]) continue;\r\n            try {\r\n                if (/^[a-zA-Z_]+[a-zA-Z0-9_]+$/.test(option[k])) option[k] += '()';\r\n                option[k] = new Function(fs[k], option[k]);\r\n            } catch (e) {\r\n                option[k] = undefined;\r\n            }\r\n        }\r\n        // content取内容\r\n        if (option.content && (typeof option.content === 'string') && option.content.indexOf('#') === 0) {\r\n            if ($(option.content).is('script')) option.content = $(option.content).html();\r\n            else option.content = $(option.content);\r\n        }\r\n        if (option.type === undefined && option.url === undefined) option.type = 2;  // 默认为iframe类型\r\n        return option;\r\n    };\r\n\r\n    /** 字符串形式的parent.parent转window对象 */\r\n    admin.strToWin = function (str) {\r\n        var win = window;\r\n        if (!str) return win;\r\n        var ws = str.split('.');\r\n        for (var i = 0; i < ws.length; i++) win = win[ws[i]];\r\n        return win;\r\n    };\r\n\r\n    /** 解决折叠侧边栏表格滚动条闪现 */\r\n    admin.hideTableScrollBar = function (win) {\r\n        if (admin.getPageWidth() <= 768) return;\r\n        if (!win) {\r\n            var $iframe = $(tabDOM + '>.layui-tab-content>.layui-tab-item.layui-show>.admin-iframe');\r\n            if ($iframe.length <= 0) $iframe = $(bodyDOM + '>div>.admin-iframe');\r\n            if ($iframe.length > 0) win = $iframe[0].contentWindow;\r\n        }\r\n        try {  // 可能会跨域\r\n            if (window.hsbTimer) clearTimeout(window.hsbTimer);\r\n            win.layui.jquery('.layui-table-body.layui-table-main').addClass('no-scrollbar');\r\n            window.hsbTimer = setTimeout(function () {\r\n                win.layui.jquery('.layui-table-body.layui-table-main').removeClass('no-scrollbar');\r\n            }, 800);\r\n        } catch (e) {\r\n        }\r\n    };\r\n\r\n    /** 判断是否是主框架 */\r\n    admin.isTop = function () {\r\n        return $(bodyDOM).length > 0;\r\n    };\r\n\r\n    /** admin提供的事件 */\r\n    admin.events = {\r\n        /* 折叠侧导航 */\r\n        flexible: function () {\r\n            admin.strToWin($(this).data('window')).layui.admin.flexible();\r\n        },\r\n        /* 刷新主体部分 */\r\n        refresh: function () {\r\n            admin.strToWin($(this).data('window')).layui.admin.refresh();\r\n        },\r\n        /* 后退 */\r\n        back: function () {\r\n            admin.strToWin($(this).data('window')).history.back();\r\n        },\r\n        /* 设置主题 */\r\n        theme: function () {\r\n            var option = admin.util.deepClone($(this).data());\r\n            admin.strToWin(option.window).layui.admin.popupRight($.extend({\r\n                id: 'layer-theme', url: option.url || '/static/assets/libs/templets/tpl-theme.html'\r\n            }, admin.parseLayerOption(option)));\r\n        },\r\n        /* 打开便签 */\r\n        note: function () {\r\n            var option = admin.util.deepClone($(this).data());\r\n            admin.strToWin(option.window).layui.admin.popupRight($.extend({\r\n                id: 'layer-note', url: option.url || '/static/assets/libs/templets/tpl-note.html'\r\n            }, admin.parseLayerOption(option)));\r\n        },\r\n        /* 打开消息 */\r\n        message: function () {\r\n            var option = admin.util.deepClone($(this).data());\r\n            admin.strToWin(option.window).layui.admin.popupRight($.extend({\r\n                id: 'layer-notice', url: option.url || '/static/assets/libs/templets/tpl-message.html'\r\n            }, admin.parseLayerOption(option)));\r\n        },\r\n        /* 打开修改密码弹窗 */\r\n        psw: function () {\r\n            var option = admin.util.deepClone($(this).data());\r\n            admin.strToWin(option.window).layui.admin.open($.extend({\r\n                id: 'layer-psw', title: '修改密码', shade: 0, url: option.url || '/static/assets/libs/templets/tpl-password.html'\r\n            }, admin.parseLayerOption(option)));\r\n        },\r\n        /* 退出登录 */\r\n        logout: function () {\r\n            var option = admin.util.deepClone($(this).data());\r\n            admin.unlockScreen();\r\n\r\n            function doLogout() {\r\n                if (option.ajax) {\r\n                    var loadIndex = layer.load(2);\r\n                    admin.req(option.ajax, function (res) {\r\n                        layer.close(loadIndex);\r\n                        if (option.parseData) {\r\n                            try {\r\n                                var parseData = new Function('res', option.parseData);\r\n                                res = parseData(res);\r\n                            } catch (e) {\r\n                                console.error(e);\r\n                            }\r\n                        }\r\n                        if (res.code == (option.code || 0)) {\r\n                            setter.removeToken && setter.removeToken();\r\n                            location.replace(option.url || '/');\r\n                        } else {\r\n                            layer.msg(res.msg, {icon: 2});\r\n                        }\r\n                    }, option.method || 'delete');\r\n                } else {\r\n                    setter.removeToken && setter.removeToken();\r\n                    location.replace(option.url || '/');\r\n                }\r\n            }\r\n\r\n            if (false === option.confirm || 'false' === option.confirm) return doLogout();\r\n            admin.strToWin(option.window).layui.layer.confirm(option.content || '确定要退出登录吗？', $.extend({\r\n                title: '温馨提示', skin: 'layui-layer-admin', shade: .1\r\n            }, admin.parseLayerOption(option)), function () {\r\n                doLogout();\r\n            });\r\n        },\r\n        /* 打开弹窗 */\r\n        open: function () {\r\n            var option = admin.util.deepClone($(this).data());\r\n            admin.strToWin(option.window).layui.admin.open(admin.parseLayerOption(option));\r\n        },\r\n        /* 打开右侧弹窗 */\r\n        popupRight: function () {\r\n            var option = admin.util.deepClone($(this).data());\r\n            admin.strToWin(option.window).layui.admin.popupRight(admin.parseLayerOption(option));\r\n        },\r\n        /* 全屏 */\r\n        fullScreen: function () {\r\n            var ac = 'layui-icon-screen-full', ic = 'layui-icon-screen-restore';\r\n            var $ti = $(this).find('i');\r\n            var isFullscreen = document.fullscreenElement || document.msFullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement || false;\r\n            if (isFullscreen) {\r\n                var efs = document.exitFullscreen || document.webkitExitFullscreen || document.mozCancelFullScreen || document.msExitFullscreen;\r\n                if (efs) {\r\n                    efs.call(document);\r\n                } else if (window.ActiveXObject) {\r\n                    var ws = new ActiveXObject('WScript.Shell');\r\n                    ws && ws.SendKeys('{F11}');\r\n                }\r\n                $ti.addClass(ac).removeClass(ic);\r\n            } else {\r\n                var el = document.documentElement;\r\n                var rfs = el.requestFullscreen || el.webkitRequestFullscreen || el.mozRequestFullScreen || el.msRequestFullscreen;\r\n                if (rfs) {\r\n                    rfs.call(el);\r\n                } else if (window.ActiveXObject) {\r\n                    var wss = new ActiveXObject('WScript.Shell');\r\n                    wss && wss.SendKeys('{F11}');\r\n                }\r\n                $ti.addClass(ic).removeClass(ac);\r\n            }\r\n        },\r\n        /* 左滑动tab */\r\n        leftPage: function () {\r\n            admin.strToWin($(this).data('window')).layui.admin.rollPage('left');\r\n        },\r\n        /* 右滑动tab */\r\n        rightPage: function () {\r\n            admin.strToWin($(this).data('window')).layui.admin.rollPage();\r\n        },\r\n        /* 关闭当前选项卡 */\r\n        closeThisTabs: function () {\r\n            var url = $(this).data('url');\r\n            admin.strToWin($(this).data('window')).layui.admin.closeThisTabs(url);\r\n        },\r\n        /* 关闭其他选项卡 */\r\n        closeOtherTabs: function () {\r\n            admin.strToWin($(this).data('window')).layui.admin.closeOtherTabs();\r\n        },\r\n        /* 关闭所有选项卡 */\r\n        closeAllTabs: function () {\r\n            admin.strToWin($(this).data('window')).layui.admin.closeAllTabs();\r\n        },\r\n        /* 关闭当前弹窗(智能) */\r\n        closeDialog: function () {\r\n            if ($(this).parents('.layui-layer').length > 0) admin.closeDialog(this);\r\n            else admin.closeDialog();\r\n        },\r\n        /* 关闭当前iframe弹窗 */\r\n        closeIframeDialog: function () {\r\n            admin.closeDialog();\r\n        },\r\n        /* 关闭当前页面层弹窗 */\r\n        closePageDialog: function () {\r\n            admin.closeDialog(this);\r\n        },\r\n        /* 锁屏 */\r\n        lockScreen: function () {\r\n            admin.strToWin($(this).data('window')).layui.admin.lockScreen($(this).data('url'));\r\n        }\r\n    };\r\n\r\n    /** 选择位置 */\r\n    admin.chooseLocation = function (param) {\r\n        var dialogTitle = param.title;  // 弹窗标题\r\n        var onSelect = param.onSelect;  // 选择回调\r\n        var needCity = param.needCity;  // 是否返回行政区\r\n        var mapCenter = param.center;  // 地图中心\r\n        var defaultZoom = param.defaultZoom;  // 地图默认缩放级别\r\n        var pointZoom = param.pointZoom;  // 选中时地图缩放级别\r\n        var searchKeywords = param.keywords;  // poi检索关键字\r\n        var searchPageSize = param.pageSize;  // poi检索最大数量\r\n        var mapJsUrl = param.mapJsUrl;  // 高德地图js的url\r\n        if (dialogTitle === undefined) dialogTitle = '选择位置';\r\n        if (defaultZoom === undefined) defaultZoom = 11;\r\n        if (pointZoom === undefined) pointZoom = 17;\r\n        if (searchKeywords === undefined) searchKeywords = '';\r\n        if (searchPageSize === undefined) searchPageSize = 30;\r\n        if (mapJsUrl === undefined) mapJsUrl = 'https://webapi.amap.com/maps?v=1.4.14&key=006d995d433058322319fa797f2876f5';\r\n        var isSelMove = false, selLocation;\r\n        // 搜索附近\r\n        var searchNearBy = function (lat, lng) {\r\n            AMap.service(['AMap.PlaceSearch'], function () {\r\n                var placeSearch = new AMap.PlaceSearch({\r\n                    type: '', pageSize: searchPageSize, pageIndex: 1\r\n                });\r\n                var cpoint = [lng, lat];\r\n                placeSearch.searchNearBy(searchKeywords, cpoint, 1000, function (status, result) {\r\n                    if (status === 'complete') {\r\n                        var pois = result.poiList.pois;\r\n                        var htmlList = '';\r\n                        for (var i = 0; i < pois.length; i++) {\r\n                            var poiItem = pois[i];\r\n                            if (poiItem.location !== undefined) {\r\n                                htmlList += '<div data-lng=\"' + poiItem.location.lng + '\" data-lat=\"' + poiItem.location.lat + '\" class=\"ew-map-select-search-list-item\">';\r\n                                htmlList += '     <div class=\"ew-map-select-search-list-item-title\">' + poiItem.name + '</div>';\r\n                                htmlList += '     <div class=\"ew-map-select-search-list-item-address\">' + poiItem.address + '</div>';\r\n                                htmlList += '     <div class=\"ew-map-select-search-list-item-icon-ok layui-hide\"><i class=\"layui-icon layui-icon-ok-circle\"></i></div>';\r\n                                htmlList += '</div>';\r\n                            }\r\n                        }\r\n                        $('#ew-map-select-pois').html(htmlList);\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        // 渲染地图\r\n        var renderMap = function () {\r\n            var mapOption = {\r\n                resizeEnable: true, // 监控地图容器尺寸变化\r\n                zoom: defaultZoom  // 初缩放级别\r\n            };\r\n            mapCenter && (mapOption.center = mapCenter);\r\n            var map = new AMap.Map('ew-map-select-map', mapOption);\r\n            // 地图加载完成\r\n            map.on('complete', function () {\r\n                var center = map.getCenter();\r\n                searchNearBy(center.lat, center.lng);\r\n            });\r\n            // 地图移动结束事件\r\n            map.on('moveend', function () {\r\n                if (isSelMove) {\r\n                    isSelMove = false;\r\n                } else {\r\n                    $('#ew-map-select-tips').addClass('layui-hide');\r\n                    $('#ew-map-select-center-img').removeClass('bounceInDown');\r\n                    setTimeout(function () {\r\n                        $('#ew-map-select-center-img').addClass('bounceInDown');\r\n                    });\r\n                    var center = map.getCenter();\r\n                    searchNearBy(center.lat, center.lng);\r\n                }\r\n            });\r\n            // poi列表点击事件\r\n            $('#ew-map-select-pois').off('click').on('click', '.ew-map-select-search-list-item', function () {\r\n                $('#ew-map-select-tips').addClass('layui-hide');\r\n                $('#ew-map-select-pois .ew-map-select-search-list-item-icon-ok').addClass('layui-hide');\r\n                $(this).find('.ew-map-select-search-list-item-icon-ok').removeClass('layui-hide');\r\n                $('#ew-map-select-center-img').removeClass('bounceInDown');\r\n                setTimeout(function () {\r\n                    $('#ew-map-select-center-img').addClass('bounceInDown');\r\n                });\r\n                var lng = $(this).data('lng');\r\n                var lat = $(this).data('lat');\r\n                var name = $(this).find('.ew-map-select-search-list-item-title').text();\r\n                var address = $(this).find('.ew-map-select-search-list-item-address').text();\r\n                selLocation = {name: name, address: address, lat: lat, lng: lng};\r\n                isSelMove = true;\r\n                map.setZoomAndCenter(pointZoom, [lng, lat]);\r\n            });\r\n            // 确定按钮点击事件\r\n            $('#ew-map-select-btn-ok').click(function () {\r\n                if (selLocation === undefined) {\r\n                    layer.msg('请点击位置列表选择', {icon: 2, anim: 6});\r\n                } else if (onSelect) {\r\n                    if (needCity) {\r\n                        var loadIndex = layer.load(2);\r\n                        map.setCenter([selLocation.lng, selLocation.lat]);\r\n                        map.getCity(function (result) {\r\n                            layer.close(loadIndex);\r\n                            selLocation.city = result;\r\n                            admin.closeDialog('#ew-map-select-btn-ok');\r\n                            onSelect(selLocation);\r\n                        });\r\n                    } else {\r\n                        admin.closeDialog('#ew-map-select-btn-ok');\r\n                        onSelect(selLocation);\r\n                    }\r\n                } else {\r\n                    admin.closeDialog('#ew-map-select-btn-ok');\r\n                }\r\n            });\r\n            // 搜索提示\r\n            var $inputSearch = $('#ew-map-select-input-search');\r\n            $inputSearch.off('input').on('input', function () {\r\n                var keywords = $(this).val();\r\n                var $selectTips = $('#ew-map-select-tips');\r\n                if (!keywords) {\r\n                    $selectTips.html('');\r\n                    $selectTips.addClass('layui-hide');\r\n                }\r\n                AMap.plugin('AMap.Autocomplete', function () {\r\n                    var autoComplete = new AMap.Autocomplete({city: '全国'});\r\n                    autoComplete.search(keywords, function (status, result) {\r\n                        if (result.tips) {\r\n                            var tips = result.tips;\r\n                            var htmlList = '';\r\n                            for (var i = 0; i < tips.length; i++) {\r\n                                var tipItem = tips[i];\r\n                                if (tipItem.location !== undefined) {\r\n                                    htmlList += '<div data-lng=\"' + tipItem.location.lng + '\" data-lat=\"' + tipItem.location.lat + '\" class=\"ew-map-select-search-list-item\">';\r\n                                    htmlList += '     <div class=\"ew-map-select-search-list-item-icon-search\"><i class=\"layui-icon layui-icon-search\"></i></div>';\r\n                                    htmlList += '     <div class=\"ew-map-select-search-list-item-title\">' + tipItem.name + '</div>';\r\n                                    htmlList += '     <div class=\"ew-map-select-search-list-item-address\">' + tipItem.address + '</div>';\r\n                                    htmlList += '</div>';\r\n                                }\r\n                            }\r\n                            $selectTips.html(htmlList);\r\n                            if (tips.length === 0) $('#ew-map-select-tips').addClass('layui-hide');\r\n                            else $('#ew-map-select-tips').removeClass('layui-hide');\r\n                        } else {\r\n                            $selectTips.html('');\r\n                            $selectTips.addClass('layui-hide');\r\n                        }\r\n                    });\r\n                });\r\n            });\r\n            $inputSearch.off('blur').on('blur', function () {\r\n                var keywords = $(this).val();\r\n                var $selectTips = $('#ew-map-select-tips');\r\n                if (!keywords) {\r\n                    $selectTips.html('');\r\n                    $selectTips.addClass('layui-hide');\r\n                }\r\n            });\r\n            $inputSearch.off('focus').on('focus', function () {\r\n                var keywords = $(this).val();\r\n                if (keywords) $('#ew-map-select-tips').removeClass('layui-hide');\r\n            });\r\n            // tips列表点击事件\r\n            $('#ew-map-select-tips').off('click').on('click', '.ew-map-select-search-list-item', function () {\r\n                $('#ew-map-select-tips').addClass('layui-hide');\r\n                var lng = $(this).data('lng');\r\n                var lat = $(this).data('lat');\r\n                selLocation = undefined;\r\n                map.setZoomAndCenter(pointZoom, [lng, lat]);\r\n            });\r\n        };\r\n        // 显示弹窗\r\n        var htmlStr = [\r\n            '<div class=\"ew-map-select-tool\" style=\"position: relative;\">',\r\n            '     搜索：<input id=\"ew-map-select-input-search\" class=\"layui-input icon-search inline-block\" style=\"width: 190px;\" placeholder=\"输入关键字搜索\" autocomplete=\"off\" />',\r\n            '     <button id=\"ew-map-select-btn-ok\" class=\"layui-btn icon-btn pull-right\" type=\"button\"><i class=\"layui-icon\">&#xe605;</i>确定</button>',\r\n            '     <div id=\"ew-map-select-tips\" class=\"ew-map-select-search-list layui-hide\">',\r\n            '     </div>',\r\n            '</div>',\r\n            '<div class=\"layui-row ew-map-select\">',\r\n            '     <div class=\"layui-col-sm7 ew-map-select-map-group\" style=\"position: relative;\">',\r\n            '          <div id=\"ew-map-select-map\"></div>',\r\n            '          <i id=\"ew-map-select-center-img2\" class=\"layui-icon layui-icon-add-1\"></i>',\r\n            '          <img id=\"ew-map-select-center-img\" src=\"https://3gimg.qq.com/lightmap/components/locationPicker2/image/marker.png\" alt=\"\"/>',\r\n            '     </div>',\r\n            '     <div id=\"ew-map-select-pois\" class=\"layui-col-sm5 ew-map-select-search-list\">',\r\n            '     </div>',\r\n            '</div>'].join('');\r\n        admin.open({\r\n            id: 'ew-map-select', type: 1, title: dialogTitle, area: '750px', content: htmlStr,\r\n            success: function (layero, dIndex) {\r\n                var $content = $(layero).children('.layui-layer-content');\r\n                $content.css('overflow', 'visible');\r\n                admin.showLoading($content);\r\n                if (undefined === window.AMap) {\r\n                    $.getScript(mapJsUrl, function () {\r\n                        renderMap();\r\n                        admin.removeLoading($content);\r\n                    });\r\n                } else {\r\n                    renderMap();\r\n                    admin.removeLoading($content);\r\n                }\r\n            }\r\n        });\r\n    };\r\n\r\n    /** 裁剪图片 */\r\n    admin.cropImg = function (param) {\r\n        var uploadedImageType = 'image/jpeg';  // 当前图片的类型\r\n        var aspectRatio = param.aspectRatio;  // 裁剪比例\r\n        var imgSrc = param.imgSrc;  // 裁剪图片\r\n        var imgType = param.imgType;  // 图片类型\r\n        var onCrop = param.onCrop;  // 裁剪完成回调\r\n        var limitSize = param.limitSize;  // 限制选择的图片大小\r\n        var acceptMime = param.acceptMime;  // 限制选择的图片类型\r\n        var imgExts = param.exts;  // 限制选择的图片类型\r\n        var dialogTitle = param.title;  // 弹窗的标题\r\n        if (aspectRatio === undefined) aspectRatio = 1;\r\n        if (dialogTitle === undefined) dialogTitle = '裁剪图片';\r\n        if (imgType) uploadedImageType = imgType;\r\n        layui.use(['Cropper', 'upload'], function () {\r\n            var Cropper = layui.Cropper, upload = layui.upload;\r\n\r\n            // 渲染组件\r\n            function renderElem() {\r\n                var imgCropper, $cropImg = $('#ew-crop-img');\r\n                // 上传文件按钮绑定事件\r\n                var uploadOptions = {\r\n                    elem: '#ew-crop-img-upload', auto: false, drag: false,\r\n                    choose: function (obj) {\r\n                        obj.preview(function (index, file, result) {\r\n                            uploadedImageType = file.type;\r\n                            $cropImg.attr('src', result);\r\n                            if (!imgSrc || !imgCropper) {\r\n                                imgSrc = result;\r\n                                renderElem();\r\n                            } else {\r\n                                imgCropper.destroy();\r\n                                imgCropper = new Cropper($cropImg[0], options);\r\n                            }\r\n                        });\r\n                    }\r\n                };\r\n                if (limitSize !== undefined) uploadOptions.size = limitSize;\r\n                if (acceptMime !== undefined) uploadOptions.acceptMime = acceptMime;\r\n                if (imgExts !== undefined) uploadOptions.exts = imgExts;\r\n                upload.render(uploadOptions);\r\n                // 没有传图片触发上传图片\r\n                if (!imgSrc) return $('#ew-crop-img-upload').trigger('click');\r\n                // 渲染裁剪组件\r\n                var options = {aspectRatio: aspectRatio, preview: '#ew-crop-img-preview'};\r\n                imgCropper = new Cropper($cropImg[0], options);\r\n                // 操作按钮绑定事件\r\n                $('.ew-crop-tool').on('click', '[data-method]', function () {\r\n                    var data = $(this).data(), cropped, result;\r\n                    if (!imgCropper || !data.method) return;\r\n                    data = $.extend({}, data);\r\n                    cropped = imgCropper.cropped;\r\n                    switch (data.method) {\r\n                        case 'rotate':\r\n                            if (cropped && options.viewMode > 0) imgCropper.clear();\r\n                            break;\r\n                        case 'getCroppedCanvas':\r\n                            if (uploadedImageType === 'image/jpeg') {\r\n                                if (!data.option) data.option = {};\r\n                                data.option.fillColor = '#fff';\r\n                            }\r\n                            break;\r\n                    }\r\n                    result = imgCropper[data.method](data.option, data.secondOption);\r\n                    switch (data.method) {\r\n                        case 'rotate':\r\n                            if (cropped && options.viewMode > 0) imgCropper.crop();\r\n                            break;\r\n                        case 'scaleX':\r\n                        case 'scaleY':\r\n                            $(this).data('option', -data.option);\r\n                            break;\r\n                        case 'getCroppedCanvas':\r\n                            if (result) {\r\n                                onCrop && onCrop(result.toDataURL(uploadedImageType));\r\n                                admin.closeDialog('#ew-crop-img');\r\n                            } else {\r\n                                layer.msg('裁剪失败', {icon: 2, anim: 6});\r\n                            }\r\n                            break;\r\n                    }\r\n                });\r\n            }\r\n\r\n            // 显示弹窗\r\n            var htmlStr = [\r\n                '<div class=\"layui-row\">',\r\n                '     <div class=\"layui-col-sm8\" style=\"min-height: 9rem;\">',\r\n                '          <img id=\"ew-crop-img\" src=\"', imgSrc || '', '\" style=\"max-width:100%;\" alt=\"\"/>',\r\n                '     </div>',\r\n                '     <div class=\"layui-col-sm4 layui-hide-xs\" style=\"padding: 15px;text-align: center;\">',\r\n                '          <div id=\"ew-crop-img-preview\" style=\"width: 100%;height: 9rem;overflow: hidden;display: inline-block;border: 1px solid #dddddd;\"></div>',\r\n                '     </div>',\r\n                '</div>',\r\n                '<div class=\"text-center ew-crop-tool\" style=\"padding: 15px 10px 5px 0;\">',\r\n                '     <div class=\"layui-btn-group\" style=\"margin-bottom: 10px;margin-left: 10px;\">',\r\n                '          <button title=\"放大\" data-method=\"zoom\" data-option=\"0.1\" class=\"layui-btn icon-btn\" type=\"button\"><i class=\"layui-icon layui-icon-add-1\"></i></button>',\r\n                '          <button title=\"缩小\" data-method=\"zoom\" data-option=\"-0.1\" class=\"layui-btn icon-btn\" type=\"button\"><span style=\"display: inline-block;width: 12px;height: 2.5px;background: rgba(255, 255, 255, 0.9);vertical-align: middle;margin: 0 4px;\"></span></button>',\r\n                '     </div>',\r\n                '     <div class=\"layui-btn-group layui-hide-xs\" style=\"margin-bottom: 10px;\">',\r\n                '          <button title=\"向左旋转\" data-method=\"rotate\" data-option=\"-45\" class=\"layui-btn icon-btn\" type=\"button\"><i class=\"layui-icon layui-icon-refresh-1\" style=\"transform: rotateY(180deg) rotate(40deg);display: inline-block;\"></i></button>',\r\n                '          <button title=\"向右旋转\" data-method=\"rotate\" data-option=\"45\" class=\"layui-btn icon-btn\" type=\"button\"><i class=\"layui-icon layui-icon-refresh-1\" style=\"transform: rotate(30deg);display: inline-block;\"></i></button>',\r\n                '     </div>',\r\n                '     <div class=\"layui-btn-group\" style=\"margin-bottom: 10px;\">',\r\n                '          <button title=\"左移\" data-method=\"move\" data-option=\"-10\" data-second-option=\"0\" class=\"layui-btn icon-btn\" type=\"button\"><i class=\"layui-icon layui-icon-left\"></i></button>',\r\n                '          <button title=\"右移\" data-method=\"move\" data-option=\"10\" data-second-option=\"0\" class=\"layui-btn icon-btn\" type=\"button\"><i class=\"layui-icon layui-icon-right\"></i></button>',\r\n                '          <button title=\"上移\" data-method=\"move\" data-option=\"0\" data-second-option=\"-10\" class=\"layui-btn icon-btn\" type=\"button\"><i class=\"layui-icon layui-icon-up\"></i></button>',\r\n                '          <button title=\"下移\" data-method=\"move\" data-option=\"0\" data-second-option=\"10\" class=\"layui-btn icon-btn\" type=\"button\"><i class=\"layui-icon layui-icon-down\"></i></button>',\r\n                '     </div>',\r\n                '     <div class=\"layui-btn-group\" style=\"margin-bottom: 10px;\">',\r\n                '          <button title=\"左右翻转\" data-method=\"scaleX\" data-option=\"-1\" class=\"layui-btn icon-btn\" type=\"button\" style=\"position: relative;width: 41px;\"><i class=\"layui-icon layui-icon-triangle-r\" style=\"position: absolute;left: 9px;top: 0;transform: rotateY(180deg);font-size: 16px;\"></i><i class=\"layui-icon layui-icon-triangle-r\" style=\"position: absolute; right: 3px; top: 0;font-size: 16px;\"></i></button>',\r\n                '          <button title=\"上下翻转\" data-method=\"scaleY\" data-option=\"-1\" class=\"layui-btn icon-btn\" type=\"button\" style=\"position: relative;width: 41px;\"><i class=\"layui-icon layui-icon-triangle-d\" style=\"position: absolute;left: 11px;top: 6px;transform: rotateX(180deg);line-height: normal;font-size: 16px;\"></i><i class=\"layui-icon layui-icon-triangle-d\" style=\"position: absolute; left: 11px; top: 14px;line-height: normal;font-size: 16px;\"></i></button>',\r\n                '     </div>',\r\n                '     <div class=\"layui-btn-group\" style=\"margin-bottom: 10px;\">',\r\n                '          <button title=\"重新开始\" data-method=\"reset\" class=\"layui-btn icon-btn\" type=\"button\"><i class=\"layui-icon layui-icon-refresh\"></i></button>',\r\n                '          <button title=\"选择图片\" id=\"ew-crop-img-upload\" class=\"layui-btn icon-btn\" type=\"button\" style=\"border-radius: 0 2px 2px 0;\"><i class=\"layui-icon layui-icon-upload-drag\"></i></button>',\r\n                '     </div>',\r\n                '     <button data-method=\"getCroppedCanvas\" data-option=\"{ &quot;maxWidth&quot;: 4096, &quot;maxHeight&quot;: 4096 }\" class=\"layui-btn icon-btn\" type=\"button\" style=\"margin-left: 10px;margin-bottom: 10px;\"><i class=\"layui-icon\">&#xe605;</i>完成</button>',\r\n                '</div>'].join('');\r\n            admin.open({\r\n                title: dialogTitle, area: '665px', type: 1, content: htmlStr,\r\n                success: function (layero, dIndex) {\r\n                    $(layero).children('.layui-layer-content').css('overflow', 'visible');\r\n                    renderElem();\r\n                }\r\n            });\r\n        });\r\n    };\r\n\r\n    /** 工具类 */\r\n    admin.util = {\r\n        /* 百度地图坐标转高德地图坐标 */\r\n        Convert_BD09_To_GCJ02: function (point) {\r\n            var x_pi = (3.14159265358979324 * 3000.0) / 180.0;\r\n            var x = point.lng - 0.0065, y = point.lat - 0.006;\r\n            var z = Math.sqrt(x * x + y * y) - 0.00002 * Math.sin(y * x_pi);\r\n            var theta = Math.atan2(y, x) - 0.000003 * Math.cos(x * x_pi);\r\n            return {lng: z * Math.cos(theta), lat: z * Math.sin(theta)};\r\n        },\r\n        /* 高德地图坐标转百度地图坐标 */\r\n        Convert_GCJ02_To_BD09: function (point) {\r\n            var x_pi = (3.14159265358979324 * 3000.0) / 180.0;\r\n            var x = point.lng, y = point.lat;\r\n            var z = Math.sqrt(x * x + y * y) + 0.00002 * Math.sin(y * x_pi);\r\n            var theta = Math.atan2(y, x) + 0.000003 * Math.cos(x * x_pi);\r\n            return {lng: z * Math.cos(theta) + 0.0065, lat: z * Math.sin(theta) + 0.006};\r\n        },\r\n        /* 动态数字 */\r\n        animateNum: function (elem, isThd, delay, grain) {\r\n            isThd = isThd === null || isThd === undefined || isThd === true || isThd === 'true';  // 是否是千分位\r\n            delay = isNaN(delay) ? 500 : delay;   // 动画延迟\r\n            grain = isNaN(grain) ? 100 : grain;   // 动画粒度\r\n            var getPref = function (str) {\r\n                var pref = '';\r\n                for (var i = 0; i < str.length; i++) if (!isNaN(str.charAt(i))) return pref; else pref += str.charAt(i);\r\n            }, getSuf = function (str) {\r\n                var suf = '';\r\n                for (var i = str.length - 1; i >= 0; i--) if (!isNaN(str.charAt(i))) return suf; else suf = str.charAt(i) + suf;\r\n            }, toThd = function (num, isThd) {\r\n                if (!isThd) return num;\r\n                if (!/^[0-9]+.?[0-9]*$/.test(num)) return num;\r\n                num = num.toString();\r\n                return num.replace(num.indexOf('.') > 0 ? /(\\d)(?=(\\d{3})+(?:\\.))/g : /(\\d)(?=(\\d{3})+(?:$))/g, '$1,');\r\n            };\r\n            $(elem).each(function () {\r\n                var $this = $(this);\r\n                var num = $this.data('num');\r\n                if (!num) {\r\n                    num = $this.text().replace(/,/g, '');  // 内容\r\n                    $this.data('num', num);\r\n                }\r\n                var flag = 'INPUT,TEXTAREA'.indexOf($this.get(0).tagName) >= 0;  // 是否是输入框\r\n                var pref = getPref(num.toString()), suf = getSuf(num.toString());\r\n                var strNum = num.toString().replace(pref, '').replace(suf, '');\r\n                if (isNaN(strNum * 1) || strNum === '0') {\r\n                    flag ? $this.val(num) : $this.html(num);\r\n                    return console.error('not a number');\r\n                }\r\n                var int_dec = strNum.split('.');\r\n                var deciLen = int_dec[1] ? int_dec[1].length : 0;\r\n                var startNum = 0.0, endNum = strNum;\r\n                if (Math.abs(endNum * 1) > 10) startNum = parseFloat(int_dec[0].substring(0, int_dec[0].length - 1) + (int_dec[1] ? '.0' + int_dec[1] : ''));\r\n                var oft = (endNum - startNum) / grain, temp = 0;\r\n                var mTime = setInterval(function () {\r\n                    var str = pref + toThd(startNum.toFixed(deciLen), isThd) + suf;\r\n                    flag ? $this.val(str) : $this.html(str);\r\n                    startNum += oft;\r\n                    temp++;\r\n                    if (Math.abs(startNum) >= Math.abs(endNum * 1) || temp > 5000) {\r\n                        str = pref + toThd(endNum, isThd) + suf;\r\n                        flag ? $this.val(str) : $this.html(str);\r\n                        clearInterval(mTime);\r\n                    }\r\n                }, delay / grain);\r\n            });\r\n        },\r\n        /* 深度克隆对象 */\r\n        deepClone: function (obj) {\r\n            var result;\r\n            var oClass = admin.util.isClass(obj);\r\n            if (oClass === 'Object') result = {};\r\n            else if (oClass === 'Array') result = [];\r\n            else return obj;\r\n            for (var key in obj) {\r\n                if (!obj.hasOwnProperty(key)) continue;\r\n                var copy = obj[key], cClass = admin.util.isClass(copy);\r\n                if (cClass === 'Object') result[key] = arguments.callee(copy); // 递归调用\r\n                else if (cClass === 'Array') result[key] = arguments.callee(copy);\r\n                else result[key] = obj[key];\r\n            }\r\n            return result;\r\n        },\r\n        /* 获取变量类型 */\r\n        isClass: function (o) {\r\n            if (o === null) return 'Null';\r\n            if (o === undefined) return 'Undefined';\r\n            return Object.prototype.toString.call(o).slice(8, -1);\r\n        },\r\n        /* 判断富文本是否为空 */\r\n        fullTextIsEmpty: function (text) {\r\n            if (!text) return true;\r\n            var noTexts = ['img', 'audio', 'video', 'iframe', 'object'];\r\n            for (var i = 0; i < noTexts.length; i++) {\r\n                if (text.indexOf('<' + noTexts[i]) > -1) return false;\r\n            }\r\n            var str = text.replace(/\\s*/g, '');  // 去掉所有空格\r\n            if (!str) return true;\r\n            str = str.replace(/&nbsp;/ig, '');  // 去掉所有&nbsp;\r\n            if (!str) return true;\r\n            str = str.replace(/<[^>]+>/g, '');   // 去掉所有html标签\r\n            return !str;\r\n        },\r\n        /* 移除元素的style */\r\n        removeStyle: function (elem, names) {\r\n            if (typeof names === 'string') names = [names];\r\n            for (var i = 0; i < names.length; i++) $(elem).css(names[i], '');\r\n        },\r\n        /* 滚动到顶部 */\r\n        scrollTop: function (elem) {\r\n            $(elem || 'html,body').animate({scrollTop: 0}, 300);\r\n        },\r\n        /* 模板解析 */\r\n        tpl: function (html, data, openCode, closeCode) {\r\n            if (html === undefined || html === null || typeof html !== 'string') return html;\r\n            if (!data) data = {};\r\n            if (!openCode) openCode = '{{';\r\n            if (!closeCode) closeCode = '}}';\r\n            var tool = {\r\n                exp: function (str) {\r\n                    return new RegExp(str, 'g');\r\n                },\r\n                // 匹配满足规则内容\r\n                query: function (type, _, __) {\r\n                    var types = ['#([\\\\s\\\\S])+?', '([^{#}])*?'][type || 0];\r\n                    return tool.exp((_ || '') + openCode + types + closeCode + (__ || ''));\r\n                },\r\n                escape: function (str) {\r\n                    return String(str || '').replace(/&(?!#?[a-zA-Z0-9]+;)/g, '&amp;')\r\n                        .replace(/</g, '&lt;').replace(/>/g, '&gt;')\r\n                        .replace(/'/g, '&#39;').replace(/\"/g, '&quot;');\r\n                },\r\n                error: function (e, tplog) {\r\n                    console.error('Laytpl Error：' + e + '\\n' + (tplog || ''));\r\n                },\r\n                parse: function (tpl, data) {\r\n                    var tplog = tpl;\r\n                    try {\r\n                        var jss = tool.exp('^' + openCode + '#'), jsse = tool.exp(closeCode + '$');\r\n                        tpl = tpl.replace(tool.exp(openCode + '#'), openCode + '# ')\r\n                            .replace(tool.exp(closeCode + '}'), '} ' + closeCode).replace(/\\\\/g, '\\\\\\\\')\r\n                            // 不匹配指定区域的内容\r\n                            .replace(tool.exp(openCode + '!(.+?)!' + closeCode), function (str) {\r\n                                str = str.replace(tool.exp('^' + openCode + '!'), '')\r\n                                    .replace(tool.exp('!' + closeCode), '')\r\n                                    .replace(tool.exp(openCode + '|' + closeCode), function (tag) {\r\n                                        return tag.replace(/(.)/g, '\\\\$1')\r\n                                    });\r\n                                return str\r\n                            })\r\n                            // 匹配JS规则内容\r\n                            .replace(/(?=\"|')/g, '\\\\').replace(tool.query(), function (str) {\r\n                                str = str.replace(jss, '').replace(jsse, '');\r\n                                return '\";' + str.replace(/\\\\/g, '') + ';view+=\"';\r\n                            })\r\n                            // 匹配普通字段\r\n                            .replace(tool.query(1), function (str) {\r\n                                var start = '\"+(';\r\n                                if (str.replace(/\\s/g, '') === openCode + closeCode) return '';\r\n                                str = str.replace(tool.exp(openCode + '|' + closeCode), '');\r\n                                if (/^=/.test(str)) {\r\n                                    str = str.replace(/^=/, '');\r\n                                    start = '\"+_escape_(';\r\n                                }\r\n                                return start + str.replace(/\\\\/g, '') + ')+\"';\r\n                            })\r\n                            // 换行符处理\r\n                            .replace(/\\r\\n/g, '\\\\r\\\\n\" + \"').replace(/\\n/g, '\\\\n\" + \"').replace(/\\r/g, '\\\\r\" + \"');\r\n                        tpl = '\"use strict\";var view = \"' + tpl + '\";return view;';\r\n                        tpl = new Function('d, _escape_', tpl);\r\n                        return tpl(data, tool.escape);\r\n                    } catch (e) {\r\n                        tool.error(e, tplog);\r\n                        return tplog;\r\n                    }\r\n                }\r\n            };\r\n            return tool.parse(html, data);\r\n        },\r\n        /* 渲染动态模板 */\r\n        render: function (option) {\r\n            if (typeof option.url === 'string') {\r\n                option.success = function (res) {\r\n                    admin.util.render($.extend({}, option, {url: res}));\r\n                };\r\n                if (option.ajax === 'ajax') admin.ajax(option);\r\n                else admin.req(option.url, option.where, option.success, option.method, option);\r\n                return;\r\n            }\r\n            var html = admin.util.tpl(option.tpl, option.url,\r\n                option.open || setter.tplOpen, option.close || setter.tplClose);\r\n            $(option.elem).next('[ew-tpl-rs]').remove();\r\n            $(option.elem).after(html);\r\n            $(option.elem).next().attr('ew-tpl-rs', '');\r\n            option.done && option.done(option.url);\r\n        }\r\n    };\r\n\r\n    /** 锁屏功能 */\r\n    admin.lockScreen = function (url) {\r\n        if (window !== top && !admin.isTop() && top.layui && top.layui.admin) return top.layui.admin.lockScreen(url);\r\n        console.log(url);\r\n        if (!url) url = '/static/assets/libs/templets/tpl-lock-screen.html';\r\n        var $lock = $('#ew-lock-screen-group');\r\n        if ($lock.length > 0) {\r\n            $lock.fadeIn('fast');\r\n            admin.isLockScreen = true;\r\n            admin.putTempData('isLockScreen', admin.isLockScreen, true);\r\n        } else {\r\n            var loadIndex = layer.load(2);\r\n            admin.ajax({\r\n                url: url, dataType: 'html',\r\n                success: function (res) {\r\n                    layer.close(loadIndex);\r\n                    if (typeof res === 'string') {\r\n                        $('body').append('<div id=\"ew-lock-screen-group\">' + res + '</div>');\r\n                        admin.isLockScreen = true;\r\n                        admin.putTempData('isLockScreen', admin.isLockScreen, true);\r\n                        admin.putTempData('lockScreenUrl', url, true);\r\n                    } else {\r\n                        console.error(res);\r\n                        layer.msg(JSON.stringify(res), {icon: 2, anim: 6});\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    /** 解除锁屏 */\r\n    admin.unlockScreen = function (isRemove) {\r\n        if (window !== top && !admin.isTop() && top.layui && top.layui.admin) return top.layui.admin.unlockScreen(isRemove);\r\n        var $lock = $('#ew-lock-screen-group');\r\n        isRemove ? $lock.remove() : $lock.fadeOut('fast');\r\n        admin.isLockScreen = false;\r\n        admin.putTempData('isLockScreen', null, true);\r\n    };\r\n\r\n    /** tips方法封装 */\r\n    admin.tips = function (option) {\r\n        return layer.tips(option.text, option.elem, {\r\n            tips: [option.direction || 1, option.bg || '#191a23'],\r\n            tipsMore: option.tipsMore, time: option.time || -1,\r\n            success: function (layero) {\r\n                var $content = $(layero).children('.layui-layer-content');\r\n                if (option.padding || option.padding === 0) $content.css('padding', option.padding);\r\n                if (option.color) $content.css('color', option.color);\r\n                if (option.bgImg) $content.css('background-image', option.bgImg).children('.layui-layer-TipsG').css('z-index', '-1');\r\n                if (option.fontSize) $content.css('font-size', option.fontSize);\r\n                if (!option.offset) return;\r\n                var offset = option.offset.split(',');\r\n                var top = offset[0], left = offset.length > 1 ? offset[1] : undefined;\r\n                if (top) $(layero).css('margin-top', top);\r\n                if (left) $(layero).css('margin-left', left);\r\n            }\r\n        });\r\n    };\r\n\r\n    /** 渲染动态模板 */\r\n    admin.renderTpl = function (elem) {\r\n        if (!layui.admin) layui.admin = admin;\r\n\r\n        // 解析数据\r\n        function parseData(data) {\r\n            if (!data) return;\r\n            try {\r\n                return new Function('return ' + data + ';')();\r\n            } catch (e) {\r\n                console.error(e + '\\nlay-data: ' + data);\r\n            }\r\n        }\r\n\r\n        $(elem || '[ew-tpl]').each(function () {\r\n            var $this = $(this);\r\n            var option = $(this).data();\r\n            option.elem = $this;\r\n            option.tpl = $this.html();\r\n            option.url = parseData($this.attr('ew-tpl'));\r\n            option.headers = parseData(option.headers);\r\n            option.where = parseData(option.where);\r\n            if (option.done) {\r\n                try {\r\n                    option.done = new Function('res', option.done);\r\n                } catch (e) {\r\n                    console.error(e + '\\nlay-data:' + option.done);\r\n                    option.done = undefined;\r\n                }\r\n            }\r\n            admin.util.render(option);\r\n        });\r\n    };\r\n\r\n    /** 事件监听 */\r\n    admin.on = function (events, callback) {\r\n        return layui.onevent.call(this, 'admin', events, callback);\r\n    };\r\n\r\n    /** 修改配置信息 */\r\n    admin.putSetting = function (key, value) {\r\n        setter[key] = value;\r\n        admin.putTempData(key, value, true);\r\n    };\r\n\r\n    /** 恢复配置信息 */\r\n    admin.recoverState = function () {\r\n        // 恢复锁屏状态\r\n        if (admin.getTempData('isLockScreen', true)) admin.lockScreen(admin.getTempData('lockScreenUrl', true));\r\n        // 恢复配置的主题\r\n        if (setter.defaultTheme) admin.changeTheme(setter.defaultTheme, window, true, true);\r\n        // 恢复页脚状态、导航箭头\r\n        if (setter.closeFooter) $('body').addClass('close-footer');\r\n        if (setter.navArrow !== undefined) {\r\n            var $nav = $(sideDOM + '>.layui-nav-tree');\r\n            $nav.removeClass('arrow2 arrow3');\r\n            if (setter.navArrow) $nav.addClass(setter.navArrow);\r\n        }\r\n        // 恢复tab自动刷新\r\n        if (setter.pageTabs && setter.tabAutoRefresh == 'true') $(tabDOM).attr('lay-autoRefresh', 'true');\r\n    };\r\n\r\n    /* 事件监听 */\r\n    admin.on = function (events, callback) {\r\n        return layui.onevent.call(this, 'admin', events, callback);\r\n    };\r\n\r\n    /** 侧导航折叠状态下鼠标经过无限悬浮效果 */\r\n    var navItemDOM = '.layui-layout-admin.admin-nav-mini>.layui-side .layui-nav .layui-nav-item';\r\n    $(document).on('mouseenter', navItemDOM + ',' + navItemDOM + ' .layui-nav-child>dd', function () {\r\n        if (admin.getPageWidth() > 768) {\r\n            var $that = $(this), $navChild = $that.find('>.layui-nav-child');\r\n            if ($navChild.length > 0) {\r\n                $that.addClass('admin-nav-hover');\r\n                $navChild.css('left', $that.offset().left + $that.outerWidth());\r\n                var top = $that.offset().top;\r\n                if (top + $navChild.outerHeight() > admin.getPageHeight()) {\r\n                    top = top - $navChild.outerHeight() + $that.outerHeight();\r\n                    if (top < 60) top = 60;\r\n                    $navChild.addClass('show-top');\r\n                }\r\n                $navChild.css('top', top);\r\n                $navChild.addClass('ew-anim-drop-in');\r\n            } else if ($that.hasClass('layui-nav-item')) {\r\n                admin.tips({elem: $that, text: $that.find('cite').text(), direction: 2, offset: '12px'});\r\n            }\r\n        }\r\n    }).on('mouseleave', navItemDOM + ',' + navItemDOM + ' .layui-nav-child>dd', function () {\r\n        layer.closeAll('tips');\r\n        var $this = $(this);\r\n        $this.removeClass('admin-nav-hover');\r\n        var $child = $this.find('>.layui-nav-child');\r\n        $child.removeClass('show-top ew-anim-drop-in');\r\n        $child.css({'left': 'auto', 'top': 'auto'});\r\n    });\r\n\r\n    /** 所有ew-event */\r\n    $(document).on('click', '*[ew-event]', function () {\r\n        var te = admin.events[$(this).attr('ew-event')];\r\n        te && te.call(this, $(this));\r\n    });\r\n\r\n    /** 所有lay-tips处理 */\r\n    $(document).on('mouseenter', '*[lay-tips]', function () {\r\n        var $this = $(this);\r\n        admin.tips({\r\n            elem: $this, text: $this.attr('lay-tips'), direction: $this.attr('lay-direction'),\r\n            bg: $this.attr('lay-bg'), offset: $this.attr('lay-offset'),\r\n            padding: $this.attr('lay-padding'), color: $this.attr('lay-color'),\r\n            bgImg: $this.attr('lay-bgImg'), fontSize: $this.attr('lay-fontSize')\r\n        });\r\n    }).on('mouseleave', '*[lay-tips]', function () {\r\n        layer.closeAll('tips');\r\n    });\r\n\r\n    /** 表单搜索展开更多 */\r\n    $(document).on('click', '.form-search-expand,[search-expand]', function () {\r\n        var $this = $(this);\r\n        var $form = $this.parents('.layui-form').first();\r\n        var expand = $this.data('expand');\r\n        var change = $this.attr('search-expand');\r\n        if (expand === undefined || expand === true) {\r\n            expand = true;\r\n            $this.data('expand', false);\r\n            $this.html('收起 <i class=\"layui-icon layui-icon-up\"></i>');\r\n            var $elem = $form.find('.form-search-show-expand');\r\n            $elem.attr('expand-show', '');\r\n            $elem.removeClass('form-search-show-expand');\r\n        } else {\r\n            expand = false;\r\n            $this.data('expand', true);\r\n            $this.html('展开 <i class=\"layui-icon layui-icon-down\"></i>');\r\n            $form.find('[expand-show]').addClass('form-search-show-expand');\r\n        }\r\n        if (!change) return;\r\n        new Function('d', change)({expand: expand, elem: $this});\r\n    });\r\n\r\n    /** select使用fixed定位显示 */\r\n    $(document).on('click.ew-sel-fixed', '.ew-select-fixed .layui-form-select .layui-select-title', function () {\r\n        var $this = $(this), $dl = $this.parent().children('dl'), tTop = $this.offset().top;\r\n        var tWidth = $this.outerWidth(), tHeight = $this.outerHeight(), scrollT = $(document).scrollTop();\r\n        var dWidth = $dl.outerWidth(), dHeight = $dl.outerHeight();\r\n        var top = tTop + tHeight + 5 - scrollT, left = $this.offset().left;\r\n        if (top + dHeight > admin.getPageHeight()) top = top - dHeight - tHeight - 10;\r\n        if (left + dWidth > admin.getPageWidth()) left = left - dWidth + tWidth;\r\n        $dl.css({'left': left, 'top': top, 'min-width': tWidth});\r\n    });\r\n\r\n    /** 用于滚动时关闭一些fixed的组件 */\r\n    admin.hideFixedEl = function () {\r\n        $('.ew-select-fixed .layui-form-select').removeClass('layui-form-selected layui-form-selectup');  // select\r\n        $('body>.layui-laydate').remove();  // laydate\r\n    };\r\n\r\n    /** 垂直导航栏展开折叠增加过渡效果 */\r\n    $(document).on('click', '.layui-nav-tree>.layui-nav-item a', function () {\r\n        var $this = $(this), $child = $this.siblings('.layui-nav-child'), $parent = $this.parent();\r\n        if ($child.length === 0) return;\r\n        if ($parent.hasClass('admin-nav-hover')) return;\r\n        if ($parent.hasClass('layui-nav-itemed')) {  // 因为layui会处理一遍所以这里状态是相反的\r\n            $child.css('display', 'none').slideDown('fast', function () {\r\n                $(this).css('display', '');\r\n            });\r\n        } else {\r\n            $child.css('display', 'block').slideUp('fast', function () {\r\n                $(this).css('display', '');\r\n            });\r\n        }\r\n        if ($this.parents('.layui-nav').attr('lay-shrink') === '_all') {  // 手风琴效果\r\n            var $siblings = $this.parent().siblings('.layui-nav-itemed');\r\n            $siblings.children('.layui-nav-child').css('display', 'block').slideUp('fast', function () {\r\n                $(this).css('display', '');\r\n            });\r\n            $siblings.removeClass('layui-nav-itemed');\r\n        }\r\n    });\r\n    $('.layui-nav-tree[lay-shrink=\"all\"]').attr('lay-shrink', '_all');  // 让layui不处理手风琴效果\r\n\r\n    /** 折叠面板展开折叠增加过渡效果 */\r\n    $(document).on('click', '.layui-collapse>.layui-colla-item>.layui-colla-title', function () {\r\n        var $this = $(this), $content = $this.siblings('.layui-colla-content')\r\n            , $collapse = $this.parent().parent(), isNone = $content.hasClass('layui-show');\r\n        if (isNone) {  // 因为layui会处理一遍所以这里状态是相反的\r\n            $content.removeClass('layui-show').slideDown('fast').addClass('layui-show');\r\n        } else {\r\n            $content.css('display', 'block').slideUp('fast', function () {\r\n                $(this).css('display', '');\r\n            });\r\n        }\r\n        $this.children('.layui-colla-icon').html('&#xe602;')\r\n            .css({'transition': 'all .3s', 'transform': 'rotate(' + (isNone ? '90deg' : '0deg') + ')'});\r\n        if ($collapse.attr('lay-shrink') === '_all') {  // 手风琴效果\r\n            var $show = $collapse.children('.layui-colla-item').children('.layui-colla-content.layui-show').not($content);\r\n            $show.css('display', 'block').slideUp('fast', function () {\r\n                $(this).css('display', '');\r\n            });\r\n            $show.removeClass('layui-show');\r\n            $show.siblings('.layui-colla-title').children('.layui-colla-icon').html('&#xe602;')\r\n                .css({'transition': 'all .3s', 'transform': 'rotate(0deg)'});\r\n        }\r\n    });\r\n    $('.layui-collapse[lay-accordion]').attr('lay-shrink', '_all').removeAttr('lay-accordion');  // 让layui不处理手风琴效果\r\n\r\n    /** 表单验证tips提示样式修改 */\r\n    layer.oldTips = layer.tips;\r\n    layer.tips = function (content, follow, options) {\r\n        var $fFip;  // 判断是否是表单验证调用的tips\r\n        if ($(follow).length > 0 && $(follow).parents('.layui-form').length > 0) {\r\n            if ($(follow).is('input') || $(follow).is('textarea')) {\r\n                $fFip = $(follow);\r\n            } else if ($(follow).hasClass('layui-form-select') || $(follow).hasClass('layui-form-radio')\r\n                || $(follow).hasClass('layui-form-checkbox') || $(follow).hasClass('layui-form-switch')) {\r\n                $fFip = $(follow).prev();\r\n            }\r\n        }\r\n        if (!$fFip) return layer.oldTips(content, follow, options);\r\n        options.tips = [$fFip.attr('lay-direction') || 3, $fFip.attr('lay-bg') || '#ff4c4c'];\r\n        setTimeout(function () {\r\n            options.success = function (layero) {\r\n                $(layero).children('.layui-layer-content').css('padding', '6px 12px');\r\n            };\r\n            layer.oldTips(content, follow, options);\r\n        }, 100);\r\n    };\r\n\r\n    /** 所有ew-href处理 */\r\n    $(document).on('click', '*[ew-href]', function () {\r\n        var $this = $(this);\r\n        var href = $this.attr('ew-href');\r\n        if (!href || href === '#') return;\r\n        if (href.indexOf('javascript:') === 0) return new Function(href.substring(11))();\r\n        var title = $this.attr('ew-title') || $this.text();\r\n        var win = $this.data('window');\r\n        win ? (win = admin.strToWin(win)) : (win = top);\r\n        var end = $this.attr('ew-end');\r\n        try {\r\n            if (end) end = new Function(end);\r\n            else end = undefined;\r\n        } catch (e) {\r\n            console.error(e);\r\n        }\r\n        if (win.layui && win.layui.index) win.layui.index.openTab({title: title || '', url: href, end: end});\r\n        else location.href = href;\r\n    });\r\n\r\n    /** 帮助鼠标右键菜单完成点击空白关闭的功能 */\r\n    if (!layui.contextMenu) {\r\n        $(document).off('click.ctxMenu').on('click.ctxMenu', function () {\r\n            try {\r\n                var ifs = top.window.frames;\r\n                for (var i = 0; i < ifs.length; i++) {\r\n                    var tif = ifs[i];\r\n                    try {  // 可能会跨域\r\n                        if (tif.layui && tif.layui.jquery) tif.layui.jquery('body>.ctxMenu').remove();\r\n                    } catch (e) {\r\n                    }\r\n                }\r\n                try {  // 可能会跨域\r\n                    if (top.layui && top.layui.jquery) top.layui.jquery('body>.ctxMenu').remove();\r\n                } catch (e) {\r\n                }\r\n            } catch (e) {\r\n            }\r\n        });\r\n    }\r\n\r\n    /** 读取缓存的配置信息 */\r\n    setter = $.extend({\r\n        pageTabs: true, cacheTab: true, openTabCtxMenu: true, maxTabNum: 20, tableName: 'easyweb-iframe',\r\n        apiNoCache: true, ajaxSuccessBefore: function (res, url, obj) {\r\n            return admin.ajaxSuccessBefore ? admin.ajaxSuccessBefore(res, url, obj) : true;\r\n        }, getAjaxHeaders: function (res, url, obj) {\r\n            return admin.getAjaxHeaders ? admin.getAjaxHeaders(res, url, obj) : [];\r\n        }\r\n    }, setter);\r\n    var cache = admin.getTempData(true);\r\n    if (cache) {\r\n        var keys = ['pageTabs', 'cacheTab', 'defaultTheme', 'navArrow', 'closeFooter', 'tabAutoRefresh'];\r\n        for (var i = 0; i < keys.length; i++) if (cache[keys[i]] !== undefined) setter[keys[i]] = cache[keys[i]];\r\n    }\r\n    admin.recoverState();  // 恢复本地配置\r\n    admin.renderTpl();  // 渲染动态模板\r\n    admin.setter = setter;\r\n    if (layui.device().ios) $('body').addClass('ios-iframe-body');  // ios浏览器iframe兼容\r\n    exports('admin', admin);\r\n});\r\n\n\n//# sourceURL=webpack:///./src/js/admin.js?");

/***/ })

/******/ });